# ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ›¸

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: mitsumorikun - AI/ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºç‰¹åŒ–åž‹ç›¸è¦‹ç©ã‚‚ã‚Šã‚µã‚¤ãƒˆ
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**ä½œæˆæ—¥**: 2025-10-15
**å‰æ**: Issue #2 è¦ä»¶å®šç¾©å®Œäº†

---

## 1. ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### 1.1 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦ï¼ˆC4ãƒ¢ãƒ‡ãƒ« - Contextï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆç™ºæ³¨è€…ï¼‰                       â”‚
â”‚              ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆPC/ã‚¹ãƒžãƒ›ï¼‰                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  mitsumorikun Platform                       â”‚
â”‚                  (Next.js on Vercel)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Frontend   â”‚  â”‚ API        â”‚  â”‚ Auth       â”‚            â”‚
â”‚  â”‚ (Next.js)  â”‚â”€â”€â”‚ (Routes)   â”‚â”€â”€â”‚ (Firebase) â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚         â”‚                â”‚                                   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   Neon PostgreSQL (Database)       â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             ä¼æ¥­ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆã‚µãƒ¼ãƒ“ã‚¹æä¾›è€…ï¼‰                     â”‚
â”‚                  ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆPCï¼‰                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆï¼ˆC4ãƒ¢ãƒ‡ãƒ« - Containerï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Vercel Platform                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Next.js Application (App Router)                        â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  Frontend    â”‚  â”‚  API Routes  â”‚  â”‚  Middleware  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  (RSC + CSR) â”‚  â”‚  (REST)      â”‚  â”‚  (Auth)      â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚         â”‚                  â”‚                  â”‚          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                  â”‚                  â”‚
             â”‚                  â–¼                  â–¼
             â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚        â”‚  Neon Postgres â”‚  â”‚  Firebase Auth â”‚
             â”‚        â”‚  (Database)    â”‚  â”‚  (Auth)        â”‚
             â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Vercel Blob / S3  â”‚
   â”‚  (File Storage)    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è©³ç´°

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|---------|------|-----------|------|
| **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** | Next.js | 14.2+ | React Framework (App Router) |
| | TypeScript | 5.8+ | åž‹å®‰å…¨æ€§ |
| | Tailwind CSS | 3.4+ | ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° |
| | shadcn/ui | latest | UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| | React Hook Form | 7.x | ãƒ•ã‚©ãƒ¼ãƒ ç®¡ç† |
| | Zod | 3.x | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |
| **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰** | Next.js API Routes | 14.2+ | RESTful API |
| | Prisma ORM | 5.x | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ORM |
| | Neon Postgres | latest | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ |
| **èªè¨¼** | Firebase Auth | 10.x | èªè¨¼ãƒ»èªå¯ |
| ã¾ãŸã¯ | Supabase Auth | latest | èªè¨¼ãƒ»èªå¯ |
| **ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°** | Vercel | latest | ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚° |
| **ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸** | Vercel Blob | latest | ç”»åƒãƒ»PDFä¿å­˜ |
| **ç›£è¦–** | Vercel Analytics | latest | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ç›£è¦– |
| | Sentry | latest | ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚° |
| **é–‹ç™º** | Docker | latest | ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒ |
| | GitHub Actions | - | CI/CD |

---

## 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### 2.1 ERå›³ï¼ˆè©³ç´°ç‰ˆï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    User     â”‚       â”‚   RequestCompany â”‚       â”‚   Company    â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)     â”‚       â”‚ id (PK)          â”‚       â”‚ id (PK)      â”‚
â”‚ email       â”‚â”€â”€â”€â”   â”‚ requestId (FK)   â”‚   â”Œâ”€â”€â”€â”‚ name         â”‚
â”‚ name        â”‚   â”‚   â”‚ companyId (FK)   â”‚   â”‚   â”‚ slug         â”‚
â”‚ company     â”‚   â”‚   â”‚ status           â”‚   â”‚   â”‚ logoUrl      â”‚
â”‚ role        â”‚   â”‚   â”‚ createdAt        â”‚   â”‚   â”‚ description  â”‚
â”‚ phone       â”‚   â”‚   â”‚ updatedAt        â”‚   â”‚   â”‚ rating       â”‚
â”‚ createdAt   â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚ reviewCount  â”‚
â”‚ updatedAt   â”‚   â”‚            â”‚              â”‚   â”‚ createdAt    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚            â”‚              â”‚   â”‚ updatedAt    â”‚
      â”‚           â”‚            â”‚              â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚           â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚          â”‚
      â”‚           â”‚   â”‚                 â”‚     â”‚          â”‚
      â”‚           â””â”€â”€â”€â”¤                 â”œâ”€â”€â”€â”€â”€â”˜          â”‚
      â”‚               â”‚                 â”‚                â”‚
      â–¼               â–¼                 â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Request   â”‚  â”‚   Review    â”‚  â”‚  Favorite  â”‚  â”‚ CompanyUser  â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)     â”‚  â”‚ id (PK)     â”‚  â”‚ id (PK)    â”‚  â”‚ id (PK)      â”‚
â”‚ projectName â”‚  â”‚ rating      â”‚  â”‚ userId(FK) â”‚  â”‚ email        â”‚
â”‚ description â”‚  â”‚ title       â”‚  â”‚companyId   â”‚  â”‚ name         â”‚
â”‚ budget      â”‚  â”‚ content     â”‚  â”‚ createdAt  â”‚  â”‚ companyId(FK)â”‚
â”‚ deadline    â”‚  â”‚ userId (FK) â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ role         â”‚
â”‚ techStacks  â”‚  â”‚companyId    â”‚                  â”‚ createdAt    â”‚
â”‚ userId (FK) â”‚  â”‚ createdAt   â”‚                  â”‚ updatedAt    â”‚
â”‚ status      â”‚  â”‚ updatedAt   â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ createdAt   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ updatedAt   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   TechStack      â”‚       â”‚  CompanyTechStack   â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)          â”‚â”€â”€â”€â”¬â”€â”€â”€â”‚ companyId (FK)      â”‚
â”‚ name             â”‚   â”‚   â”‚ techStackId (FK)    â”‚
â”‚ category         â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ iconUrl          â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â””â”€â”€â”€â”‚  CompanySpecialty   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚   Specialty      â”‚       â”‚ companyId (FK)      â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”‚ specialtyId (FK)    â”‚
â”‚ id (PK)          â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ name             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­è¨ˆ

| ãƒ†ãƒ¼ãƒ–ãƒ« | ã‚«ãƒ©ãƒ  | ç¨®é¡ž | ç†ç”± |
|---------|--------|------|------|
| User | email | UNIQUE | ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®é«˜é€Ÿæ¤œç´¢ |
| Company | slug | UNIQUE | URLè¡¨ç¤ºç”¨ |
| Company | name | INDEX | æ¤œç´¢æ©Ÿèƒ½ |
| Company | status | INDEX | æ‰¿èªæ¸ˆã¿ä¼æ¥­ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° |
| Request | userId | INDEX | ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¥è³‡æ–™è«‹æ±‚ä¸€è¦§ |
| RequestCompany | requestId, companyId | INDEX | ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é«˜é€ŸåŒ– |
| Review | companyId | INDEX | ä¼æ¥­åˆ¥ãƒ¬ãƒ“ãƒ¥ãƒ¼å–å¾— |
| Favorite | userId, companyId | UNIQUE INDEX | é‡è¤‡é˜²æ­¢ |

### 2.3 ãƒžã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æˆ¦ç•¥

```bash
# Prisma Migrateä½¿ç”¨
npx prisma migrate dev --name init
npx prisma migrate deploy  # æœ¬ç•ªé©ç”¨

# ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
prisma migrate resolve --rolled-back [migration_name]
```

---

## 3. APIè¨­è¨ˆ

### 3.1 REST API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

#### èªè¨¼ç³» API

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜Ž | èªè¨¼ |
|--------------|---------|------|------|
| `/api/auth/register` | POST | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ² | - |
| `/api/auth/login` | POST | ãƒ­ã‚°ã‚¤ãƒ³ | - |
| `/api/auth/logout` | POST | ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ | âœ“ |
| `/api/auth/me` | GET | ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾— | âœ“ |
| `/api/auth/refresh` | POST | ãƒˆãƒ¼ã‚¯ãƒ³ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ | âœ“ |

#### ä¼æ¥­ç³» API

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜Ž | èªè¨¼ |
|--------------|---------|------|------|
| `/api/companies` | GET | ä¼æ¥­ä¸€è¦§å–å¾— | - |
| `/api/companies/:slug` | GET | ä¼æ¥­è©³ç´°å–å¾— | - |
| `/api/companies` | POST | ä¼æ¥­ç™»éŒ² | âœ“ |
| `/api/companies/:id` | PATCH | ä¼æ¥­æƒ…å ±æ›´æ–° | âœ“ (ä¼æ¥­) |
| `/api/companies/:id` | DELETE | ä¼æ¥­å‰Šé™¤ | âœ“ (ç®¡ç†è€…) |

#### è³‡æ–™è«‹æ±‚ç³» API

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜Ž | èªè¨¼ |
|--------------|---------|------|------|
| `/api/requests` | POST | è³‡æ–™è«‹æ±‚ä½œæˆ | âœ“ |
| `/api/requests` | GET | è³‡æ–™è«‹æ±‚ä¸€è¦§å–å¾— | âœ“ |
| `/api/requests/:id` | GET | è³‡æ–™è«‹æ±‚è©³ç´°å–å¾— | âœ“ |
| `/api/requests/:id` | PATCH | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–° | âœ“ |

#### ãƒ¬ãƒ“ãƒ¥ãƒ¼ç³» API

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜Ž | èªè¨¼ |
|--------------|---------|------|------|
| `/api/reviews` | POST | ãƒ¬ãƒ“ãƒ¥ãƒ¼æŠ•ç¨¿ | âœ“ |
| `/api/companies/:id/reviews` | GET | ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸€è¦§å–å¾— | - |
| `/api/reviews/:id` | PATCH | ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–° | âœ“ |
| `/api/reviews/:id` | DELETE | ãƒ¬ãƒ“ãƒ¥ãƒ¼å‰Šé™¤ | âœ“ |

### 3.2 èªè¨¼ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client   â”‚                â”‚ Next.js API  â”‚              â”‚  Firebase  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
     â”‚                             â”‚                            â”‚
     â”‚ 1. POST /api/auth/login     â”‚                            â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                            â”‚
     â”‚                             â”‚ 2. Verify credentials      â”‚
     â”‚                             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                             â”‚                            â”‚
     â”‚                             â”‚ 3. JWT Token               â”‚
     â”‚                             â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚ 4. Access Token +           â”‚                            â”‚
     â”‚    Refresh Token            â”‚                            â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                            â”‚
     â”‚                             â”‚                            â”‚
     â”‚ 5. API Request              â”‚                            â”‚
     â”‚    (Bearer Token)           â”‚                            â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                            â”‚
     â”‚                             â”‚ 6. Verify Token            â”‚
     â”‚                             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                             â”‚                            â”‚
     â”‚ 7. Response                 â”‚                            â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                            â”‚
```

### 3.3 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

**æ¨™æº–ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "å…¥åŠ›å†…å®¹ã«èª¤ã‚ŠãŒã‚ã‚Šã¾ã™",
    "details": [
      {
        "field": "email",
        "message": "æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
      }
    ]
  },
  "timestamp": "2025-10-15T10:00:00Z",
  "path": "/api/auth/register"
}
```

**HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰**:
- `200`: æˆåŠŸ
- `201`: ä½œæˆæˆåŠŸ
- `400`: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
- `401`: èªè¨¼ã‚¨ãƒ©ãƒ¼
- `403`: æ¨©é™ã‚¨ãƒ©ãƒ¼
- `404`: ãƒªã‚½ãƒ¼ã‚¹æœªæ¤œå‡º
- `429`: ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆè¶…éŽ
- `500`: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼

---

## 4. ã‚¤ãƒ³ãƒ•ãƒ©è¨­è¨ˆ

### 4.1 Vercelç’°å¢ƒæ§‹æˆ

| ç’°å¢ƒ | ãƒ–ãƒ©ãƒ³ãƒ | URL | ç”¨é€” |
|------|---------|-----|------|
| Development | feature/* | Preview | é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆ |
| Staging | develop | staging.mitsumorikun.com | ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚° |
| Production | main | mitsumorikun.com | æœ¬ç•ª |

### 4.2 ç’°å¢ƒå¤‰æ•°ç®¡ç†

```bash
# .env.local (ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º)
DATABASE_URL="postgresql://..."
NEXT_PUBLIC_FIREBASE_API_KEY="..."
FIREBASE_PROJECT_ID="..."
NEXT_PUBLIC_API_URL="http://localhost:3000"

# Vercelç’°å¢ƒå¤‰æ•°ï¼ˆæœ¬ç•ªï¼‰
DATABASE_URL="postgres://..." # NeonæŽ¥ç¶šæ–‡å­—åˆ—
FIREBASE_ADMIN_SDK="..." # Firebase Admin SDK
SENTRY_DSN="..." # Sentryã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
```

### 4.3 Neon PostgreSQLæ§‹æˆ

**ãƒ—ãƒ©ãƒ³**: Scaleï¼ˆæœ¬ç•ªç”¨ï¼‰
**ãƒªãƒ¼ã‚¸ãƒ§ãƒ³**: Tokyo (ap-northeast-1)
**æŽ¥ç¶šæ–¹æ³•**: Connection Poolingæœ‰åŠ¹
**ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: è‡ªå‹•ï¼ˆæ—¥æ¬¡ï¼‰

---

## 5. ãƒ‡ãƒ—ãƒ­ã‚¤è¨­è¨ˆ

### 5.1 CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆGitHub Actionsï¼‰

```yaml
# .github/workflows/ci.yml
name: CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
      - run: npm ci
      - run: npm run typecheck
      - run: npm run lint
      - run: npm test
      - run: npm run build

  deploy:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
      - uses: vercel/action@v2
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
```

### 5.2 ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ãƒ­ãƒ¼

```
1. Pull Requestä½œæˆ
   â†“
2. CIå®Ÿè¡Œï¼ˆTypeCheck, Lint, Test, Buildï¼‰
   â†“
3. Vercel Preview Deployment
   â†“
4. ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼
   â†“
5. develop ãƒžãƒ¼ã‚¸ â†’ Staging Deploy
   â†“
6. Staging ãƒ†ã‚¹ãƒˆ
   â†“
7. main ãƒžãƒ¼ã‚¸ â†’ Production Deploy
   â†“
8. æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†
```

---

## 6. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### 6.1 èªè¨¼ãƒ»èªå¯ãƒ•ãƒ­ãƒ¼

**JWTæ§‹é€ **:
```json
{
  "header": {
    "alg": "RS256",
    "typ": "JWT"
  },
  "payload": {
    "sub": "user_id",
    "email": "user@example.com",
    "role": "user",
    "iat": 1234567890,
    "exp": 1234571490
  }
}
```

### 6.2 OWASP Top 10å¯¾ç­–

| è„†å¼±æ€§ | å¯¾ç­– |
|--------|------|
| SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ | Prisma ORMä½¿ç”¨ï¼ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã‚¯ã‚¨ãƒªï¼‰ |
| XSS | Reactè‡ªå‹•ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã€CSPè¨­å®š |
| CSRF | SameSite Cookieã€CSRF Token |
| èªè¨¼ã®ä¸å‚™ | Firebase Authã€JWTæ¤œè¨¼ |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šãƒŸã‚¹ | Vercel Security Headers |
| æ©Ÿå¾®ãªãƒ‡ãƒ¼ã‚¿ã®éœ²å‡º | ç’°å¢ƒå¤‰æ•°ç®¡ç†ã€æš—å·åŒ– |
| ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®ä¸å‚™ | RBACå®Ÿè£…ã€Middlewareæ¤œè¨¼ |

---

**ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ Issue #3 ã®è¦ä»¶ã«åŸºã¥ã„ã¦ã€Miyabi Autonomous Agent ã«ã‚ˆã‚Šè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚**

ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>
